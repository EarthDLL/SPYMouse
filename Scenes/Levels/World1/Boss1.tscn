[gd_scene load_steps=33 format=3 uid="uid://driw67e7078en"]

[ext_resource type="PackedScene" uid="uid://w821cv67qtui" path="res://Scenes/Levels/BossLevel.tscn" id="1_yskvx"]
[ext_resource type="Resource" uid="uid://cbrqtmfuricp4" path="res://Scenes/Levels/World1/Level-Boss.tres" id="2_1b023"]
[ext_resource type="Texture2D" uid="uid://cxy5bescpr1vq" path="res://Resource/MapBG/map736/map736.jpg" id="2_vf8mn"]
[ext_resource type="Script" uid="uid://dehp13f7igwvr" path="res://Scripts/Classes/BossLevelRespawner.gd" id="2_vibig"]
[ext_resource type="Texture2D" uid="uid://dpq2j4ut6n6w3" path="res://Resource/MapBG/map736/map736_1.jpg" id="3_q31kt"]
[ext_resource type="AudioStream" uid="uid://l0p0jx78axka" path="res://Resource/Music/CM_Alleys.ogg" id="4_6lyjb"]
[ext_resource type="PackedScene" uid="uid://bd41rlrm3d5es" path="res://Scenes/Nodes/CatPath.tscn" id="5_2xxsl"]
[ext_resource type="PackedScene" uid="uid://re5n37m18uxt" path="res://Scenes/Sprites/Cheese/LittleCheese.tscn" id="6_bclbv"]
[ext_resource type="PackedScene" uid="uid://ck5qqv3nnlhm2" path="res://Scenes/Sprites/Cats/BossCat.tscn" id="6_fdxyp"]
[ext_resource type="Texture2D" uid="uid://7myrf0a1lel" path="res://Resource/sprites/exit_map736.png" id="6_wndwj"]
[ext_resource type="PackedScene" uid="uid://uc4s2hoi67ss" path="res://Scenes/Sprites/MouseToy.tscn" id="7_d7k3p"]
[ext_resource type="PackedScene" uid="uid://bt4162t1jb6o1" path="res://Scenes/Sprites/Cheese/MouseTrap.tscn" id="8_wndwj"]
[ext_resource type="PackedScene" uid="uid://dbuebbt0st5es" path="res://Scenes/Sprites/Cheese/Cheese.tscn" id="9_ggvj5"]
[ext_resource type="Texture2D" uid="uid://db7rdagsdugkj" path="res://Resource/sprites/exit_door.png" id="14_ggvj5"]

[sub_resource type="Resource" id="Resource_p4cjo"]
script = ExtResource("2_vibig")
store_x_vectors = [737.0, 2228.0]
player_respawn_pos = [Vector2(474, -114), Vector2(2120, 205)]
cat_respawn_index = [7, 18]
metadata/_custom_type_script = "uid://dehp13f7igwvr"

[sub_resource type="RectangleShape2D" id="RectangleShape2D_asrf7"]
size = Vector2(73, 72)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_djl2y"]
size = Vector2(149, 73.5)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_dk6kt"]
size = Vector2(148, 74)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_05i4n"]
size = Vector2(148, 74)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_2q7wy"]
size = Vector2(231, 74)

[sub_resource type="NavigationPolygon" id="NavigationPolygon_bclbv"]
vertices = PackedVector2Array(901, 125, 1333, 93, 1467, 83.5, 1467, 187.5, 708.133, 212.977, 1154, 93, 1645, 187.5, 1732.27, 212.008, 2001.11, -126.094, 2003.11, 139.531, 1922, 38, 1922, -66, 1205.94, -130.961, 1564, -89.5, 1734.27, 105.18, 1645, 83.5, 1661, 38, 1661, -66, 1564, 14.5, 1154, -10.5, 901, 23, 1091.04, -45.0391, 798, 125, 786.844, -42.8906, 798, 23, 694.133, -23.1875, 717.844, -135.141, 1333, -10.5, 1386, 14.5, 2256.87, -48.8906, 2125.68, -49.8828, 2129.32, -130.781, 2257.12, -128.906, 2379.7, -100.109, -227.172, 133.313, -225.383, 205, -303.859, 205, -303.141, 130.242, -249.109, 131.133, -211.258, 74.9688, -179.352, 91.7813, -503.453, 63.0469, -911, 66.1094, -911, -63.9219, -522.867, -56.8516, -445.453, -12.9609, -471.789, -136.961, -228.898, -136.023, -252.953, -14.0313, -67.9531, 12.9297, -208.633, 29.0234, 550.25, 134.609, 551.719, 216.094, 249.891, 217.961, 359.883, 129.609, 718.844, -228, 920.82, -228, 920.156, -171.773, 788.148, -169.781, 2382.28, 31.4922, 2495.12, 35.4766, 2495.87, 120, 2389.98, 120, 2258.07, 83.1875, 2852.95, -51.0391, 2954.89, -50.1328, 2954.05, 71.7422, 2816.75, 214.852, 2783.36, 214.109, 2614.12, 79.8516, 2616.13, -41.6328, 2263.99, 214.977, 1849.2, 214.031, 1843.19, 103.82, 2673.98, -185.008, 2535.86, -98.9609, 2314.2, -185.977, 2180.02, 145.172, 361.117, -18.8125, 134.852, 109.922, 121.938, 15.0781, 192.023, -68.6094, 289.453, -131.039, -118.922, 94.1484, -84.2891, 112.938, 1386, -89.5)
polygons = Array[PackedInt32Array]([PackedInt32Array(0, 1, 2, 3, 4), PackedInt32Array(5, 1, 0), PackedInt32Array(6, 7, 4, 3), PackedInt32Array(8, 9, 10, 11), PackedInt32Array(12, 8, 11, 13), PackedInt32Array(14, 7, 6, 15, 16), PackedInt32Array(17, 16, 15, 18, 13), PackedInt32Array(19, 5, 0, 20, 21), PackedInt32Array(22, 0, 4), PackedInt32Array(23, 24, 22, 4, 25, 26), PackedInt32Array(2, 1, 27, 28), PackedInt32Array(29, 30, 31, 32, 33), PackedInt32Array(34, 35, 36, 37, 38), PackedInt32Array(34, 38, 39, 40), PackedInt32Array(41, 42, 43, 44, 45), PackedInt32Array(45, 44, 46, 47, 48), PackedInt32Array(48, 47, 49, 50), PackedInt32Array(51, 52, 53, 54), PackedInt32Array(55, 56, 57, 58), PackedInt32Array(26, 55, 58, 23), PackedInt32Array(59, 60, 61, 62, 63), PackedInt32Array(64, 65, 66, 67, 68, 69, 70), PackedInt32Array(71, 72, 73, 9), PackedInt32Array(74, 64, 70, 75), PackedInt32Array(76, 74, 75, 33, 32), PackedInt32Array(29, 33, 59, 63), PackedInt32Array(63, 62, 71, 77), PackedInt32Array(78, 54, 53, 79, 80, 81, 82), PackedInt32Array(40, 39, 50, 49, 83), PackedInt32Array(79, 84, 83, 49, 80), PackedInt32Array(78, 82, 26, 25), PackedInt32Array(24, 23, 21, 20), PackedInt32Array(27, 19, 21, 12, 85), PackedInt32Array(16, 10, 9, 73), PackedInt32Array(9, 77, 71), PackedInt32Array(16, 73, 14), PackedInt32Array(18, 15, 2, 28), PackedInt32Array(85, 28, 27), PackedInt32Array(11, 17, 13), PackedInt32Array(85, 12, 13)])
outlines = Array[PackedVector2Array]([PackedVector2Array(-926, -346, -926, 290, 3028, 317, 3024, -350)])
parsed_geometry_type = 1
source_geometry_mode = 1
source_geometry_group_name = &"Blocker"
agent_radius = 15.0

[sub_resource type="RectangleShape2D" id="RectangleShape2D_wndwj"]
size = Vector2(240, 73)

[sub_resource type="AtlasTexture" id="AtlasTexture_iqknm"]
atlas = ExtResource("14_ggvj5")
region = Rect2(768, 0, 96, 192)

[sub_resource type="AtlasTexture" id="AtlasTexture_cw0jw"]
atlas = ExtResource("14_ggvj5")
region = Rect2(672, 0, 96, 192)

[sub_resource type="AtlasTexture" id="AtlasTexture_fi533"]
atlas = ExtResource("14_ggvj5")
region = Rect2(576, 0, 96, 192)

[sub_resource type="AtlasTexture" id="AtlasTexture_ck0t8"]
atlas = ExtResource("14_ggvj5")
region = Rect2(480, 0, 96, 192)

[sub_resource type="AtlasTexture" id="AtlasTexture_dfabx"]
atlas = ExtResource("14_ggvj5")
region = Rect2(384, 0, 96, 192)

[sub_resource type="AtlasTexture" id="AtlasTexture_sod7h"]
atlas = ExtResource("14_ggvj5")
region = Rect2(288, 0, 96, 192)

[sub_resource type="AtlasTexture" id="AtlasTexture_cnmjt"]
atlas = ExtResource("14_ggvj5")
region = Rect2(192, 0, 96, 192)

[sub_resource type="AtlasTexture" id="AtlasTexture_my8nc"]
atlas = ExtResource("14_ggvj5")
region = Rect2(96, 0, 96, 192)

[sub_resource type="AtlasTexture" id="AtlasTexture_68f04"]
atlas = ExtResource("14_ggvj5")
region = Rect2(0, 0, 96, 192)

[sub_resource type="SpriteFrames" id="SpriteFrames_nss3h"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_iqknm")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_cw0jw")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_fi533")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_ck0t8")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_dfabx")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_sod7h")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_cnmjt")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_my8nc")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_68f04")
}],
"loop": true,
"name": &"Close",
"speed": 5.0
}]

[node name="BossLevel" node_paths=PackedStringArray("signaler", "camera", "entrance_area") instance=ExtResource("1_yskvx")]
signaler = NodePath("Player/Visible")
camera = NodePath("BossCat/Camera2D")
entrance_area = NodePath("EntranceArea")
respawner = SubResource("Resource_p4cjo")
level_info = ExtResource("2_1b023")

[node name="1" type="Sprite2D" parent="Bg" index="0"]
texture = ExtResource("2_vf8mn")

[node name="2" type="Sprite2D" parent="Bg" index="1"]
position = Vector2(2048, 0)
texture = ExtResource("3_q31kt")

[node name="ExitMask" type="Sprite2D" parent="Bg" index="2"]
z_index = 80
z_as_relative = false
position = Vector2(3038, 1)
texture = ExtResource("6_wndwj")

[node name="Tip" type="Label" parent="Bg" index="3"]
modulate = Color(1, 1, 1, 0.541176)
offset_left = -662.0
offset_top = 158.0
offset_right = -412.0
offset_bottom = 190.0
theme_override_font_sizes/font_size = 25
text = "跟着，不要被发现了！"

[node name="1" type="StaticBody2D" parent="Bodies" index="0"]
collision_layer = 2
collision_mask = 0

[node name="Collision" type="CollisionPolygon2D" parent="Bodies/1" index="0"]
polygon = PackedVector2Array(-1025, -387, -1025, -81, -531, -72, -480, -152, -223, -151, -62, -2, 115, 0, 182, -80, 285, -146, 703, -150, 704, -243, 936, -243, 935, -157, 803, -155, 802, -58, 1086, -60, 1201, -146, 2016, -141, 2018, 125, 2175, 130, 2243, 76, 2242, -34, 2110, -35, 2115, -146, 2251, -144, 2308, -201, 2679, -200, 2858, -66, 2970, -65, 3077, -64, 3071, -384)

[node name="2" type="StaticBody2D" parent="Bodies" index="1"]
collision_layer = 2
collision_mask = 0

[node name="Collision" type="CollisionPolygon2D" parent="Bodies/2" index="0"]
polygon = PackedVector2Array(-1028, 82, -1020, 383, 3072, 383, 3077, 84, 2965, 82, 2823, 230, 2778, 229, 2599, 87, 2601, -34, 2531, -84, 2395, -85, 2397, 17, 2510, 21, 2511, 135, 2395, 135, 2269, 230, 1835, 229, 1829, 119, 1749, 120, 1747, 227, 694, 228, 680, -8, 376, -4, 375, 115, 565, 120, 567, 231, 244, 233, 129, 125, -88, 128, -123, 109, -174, 107, -212, 140, -210, 220, -319, 220, -318, 115, -257, 116, -226, 70, -224, 35, -259, 1, -438, 2, -496, 78)

[node name="3" type="StaticBody2D" parent="Bodies" index="2"]
position = Vector2(849, 68)
collision_layer = 2
collision_mask = 0

[node name="Collision" type="CollisionShape2D" parent="Bodies/3" index="0"]
position = Vector2(0.5, 6)
shape = SubResource("RectangleShape2D_asrf7")

[node name="4" type="StaticBody2D" parent="Bodies" index="3"]
position = Vector2(1243, 36)
collision_layer = 2
collision_mask = 0

[node name="Collision" type="CollisionShape2D" parent="Bodies/4" index="0"]
position = Vector2(0.5, 5.25)
shape = SubResource("RectangleShape2D_djl2y")

[node name="5" type="StaticBody2D" parent="Bodies" index="4"]
position = Vector2(1475, -43)
collision_layer = 2
collision_mask = 0

[node name="Collision" type="CollisionShape2D" parent="Bodies/5" index="0"]
position = Vector2(0, 5.5)
shape = SubResource("RectangleShape2D_dk6kt")

[node name="6" type="StaticBody2D" parent="Bodies" index="5"]
position = Vector2(1557, 130)
collision_layer = 2
collision_mask = 0

[node name="Collision" type="CollisionShape2D" parent="Bodies/6" index="0"]
position = Vector2(-1, 5.5)
shape = SubResource("RectangleShape2D_05i4n")

[node name="7" type="StaticBody2D" parent="Bodies" index="6"]
position = Vector2(1800, -18)
collision_layer = 2
collision_mask = 0

[node name="Collision" type="CollisionShape2D" parent="Bodies/7" index="0"]
position = Vector2(-8.5, 4)
shape = SubResource("RectangleShape2D_2q7wy")

[node name="Region" parent="." index="2"]
navigation_polygon = SubResource("NavigationPolygon_bclbv")

[node name="Items" type="Node2D" parent="." index="3"]

[node name="LittleCheese" parent="Items" index="0" instance=ExtResource("6_bclbv")]
position = Vector2(-722, 1)

[node name="LittleCheese2" parent="Items" index="1" instance=ExtResource("6_bclbv")]
position = Vector2(-691, 1)

[node name="LittleCheese3" parent="Items" index="2" instance=ExtResource("6_bclbv")]
position = Vector2(-298, -118)

[node name="LittleCheese4" parent="Items" index="3" instance=ExtResource("6_bclbv")]
position = Vector2(-258, -118)

[node name="LittleCheese5" parent="Items" index="4" instance=ExtResource("6_bclbv")]
position = Vector2(241, -80)

[node name="LittleCheese6" parent="Items" index="5" instance=ExtResource("6_bclbv")]
position = Vector2(276, -104)

[node name="LittleCheese7" parent="Items" index="6" instance=ExtResource("6_bclbv")]
position = Vector2(438, 179)

[node name="LittleCheese8" parent="Items" index="7" instance=ExtResource("6_bclbv")]
position = Vector2(396, 178)

[node name="LittleCheese9" parent="Items" index="8" instance=ExtResource("6_bclbv")]
position = Vector2(883, -201)

[node name="LittleCheese10" parent="Items" index="9" instance=ExtResource("6_bclbv")]
position = Vector2(817, -201)

[node name="LittleCheese11" parent="Items" index="10" instance=ExtResource("6_bclbv")]
position = Vector2(749, -201)

[node name="LittleCheese12" parent="Items" index="11" instance=ExtResource("6_bclbv")]
position = Vector2(855, 139)

[node name="LittleCheese13" parent="Items" index="12" instance=ExtResource("6_bclbv")]
position = Vector2(784, 140)

[node name="LittleCheese14" parent="Items" index="13" instance=ExtResource("6_bclbv")]
position = Vector2(785, 84)

[node name="LittleCheese15" parent="Items" index="14" instance=ExtResource("6_bclbv")]
position = Vector2(785, 27)

[node name="LittleCheese16" parent="Items" index="15" instance=ExtResource("6_bclbv")]
position = Vector2(1298, 109)

[node name="LittleCheese17" parent="Items" index="16" instance=ExtResource("6_bclbv")]
position = Vector2(1241, 109)

[node name="LittleCheese18" parent="Items" index="17" instance=ExtResource("6_bclbv")]
position = Vector2(1186, 108)

[node name="LittleCheese19" parent="Items" index="18" instance=ExtResource("6_bclbv")]
position = Vector2(1229, -112)

[node name="LittleCheese20" parent="Items" index="19" instance=ExtResource("6_bclbv")]
position = Vector2(1275, -112)

[node name="LittleCheese21" parent="Items" index="20" instance=ExtResource("6_bclbv")]
position = Vector2(1583, 202)

[node name="LittleCheese23" parent="Items" index="21" instance=ExtResource("6_bclbv")]
position = Vector2(1850, -66)

[node name="LittleCheese24" parent="Items" index="22" instance=ExtResource("6_bclbv")]
position = Vector2(1793, -66)

[node name="LittleCheese25" parent="Items" index="23" instance=ExtResource("6_bclbv")]
position = Vector2(1736, -66)

[node name="LittleCheese22" parent="Items" index="24" instance=ExtResource("6_bclbv")]
position = Vector2(1528, 202)

[node name="LittleCheese26" parent="Items" index="25" instance=ExtResource("6_bclbv")]
position = Vector2(2465, 76)

[node name="LittleCheese27" parent="Items" index="26" instance=ExtResource("6_bclbv")]
position = Vector2(2420, 76)

[node name="LittleCheese28" parent="Items" index="27" instance=ExtResource("6_bclbv")]
position = Vector2(2379, 77)

[node name="LittleCheese29" parent="Items" index="28" instance=ExtResource("6_bclbv")]
position = Vector2(2222, -83)

[node name="LittleCheese30" parent="Items" index="29" instance=ExtResource("6_bclbv")]
position = Vector2(2637, 66)

[node name="MouseToy" parent="Items" index="30" instance=ExtResource("7_d7k3p")]
position = Vector2(-264, 167)
side = 3

[node name="MouseToy2" parent="Items" index="31" instance=ExtResource("7_d7k3p")]
position = Vector2(1471, -106)
side = 3

[node name="MouseToy3" parent="Items" index="32" instance=ExtResource("7_d7k3p")]
position = Vector2(1698, 192)
side = 3

[node name="MouseToy4" parent="Items" index="33" instance=ExtResource("7_d7k3p")]
position = Vector2(2148, -87)
side = 3

[node name="MouseTrap" parent="Items" index="34" instance=ExtResource("8_wndwj")]
position = Vector2(511, 179)

[node name="MouseTrap2" parent="Items" index="35" instance=ExtResource("8_wndwj")]
position = Vector2(1874, 190)

[node name="MouseTrap3" parent="Items" index="36" instance=ExtResource("8_wndwj")]
position = Vector2(1871, 128)

[node name="MouseTrap4" parent="Items" index="37" instance=ExtResource("8_wndwj")]
position = Vector2(2684, 99)

[node name="Cheese" parent="Items" index="38" instance=ExtResource("9_ggvj5")]
position = Vector2(519, 179)

[node name="Cheese2" parent="Items" index="39" instance=ExtResource("9_ggvj5")]
position = Vector2(1880, 193)

[node name="Cheese3" parent="Items" index="40" instance=ExtResource("9_ggvj5")]
position = Vector2(1877, 130)

[node name="Cheese4" parent="Items" index="41" instance=ExtResource("9_ggvj5")]
position = Vector2(2691, 103)

[node name="Player" parent="." index="4"]
position = Vector2(-780, 0)
collectable_items_count = 5

[node name="Visible" type="VisibleOnScreenNotifier2D" parent="Player" index="7"]
position = Vector2(-35, -11.5)
scale = Vector2(0.400001, 3.45)

[node name="CatPath" parent="." index="6" instance=ExtResource("5_2xxsl")]
points = PackedVector2Array(-607, 0, -506, 0, -447, -81, -251, -79, -80, 63, 198, 61, 351, -71, 613.899, -72.3379, 744, -73, 744, 175, 1050, 175, 1154, -53, 1337, -53, 1379, 51, 1609, 49, 1610, -102, 1958, -104, 1957, 179, 2223, 178, 2318, 75, 2317, -104, 2368, -150, 2603, -150, 2709, -6, 3069, -6)

[node name="BossCat" parent="." index="7" instance=ExtResource("6_fdxyp")]
position = Vector2(-609, 4)
state = 1

[node name="Camera2D" type="Camera2D" parent="BossCat" index="5"]
limit_left = -1024
limit_top = -384
limit_right = 3060
limit_bottom = 384
limit_smoothed = true
position_smoothing_enabled = true
drag_horizontal_enabled = true
drag_vertical_enabled = true
drag_top_margin = 1.0
drag_bottom_margin = 1.0
editor_draw_drag_margin = true

[node name="EntranceArea" type="Area2D" parent="." index="8"]
collision_layer = 0

[node name="Collision" type="CollisionShape2D" parent="EntranceArea" index="0"]
position = Vector2(3073, -6.5)
shape = SubResource("RectangleShape2D_wndwj")

[node name="BgMusic" parent="." index="11"]
stream = ExtResource("4_6lyjb")

[node name="ExitDoor" type="AnimatedSprite2D" parent="." index="13"]
z_index = 90
z_as_relative = false
position = Vector2(2997, -4)
sprite_frames = SubResource("SpriteFrames_nss3h")
animation = &"Close"
